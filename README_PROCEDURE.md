# –•—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –≤ SQL
–•—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã ‚Äî —ç—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–µ –±–ª–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Ñ—É–Ω–∫—Ü–∏–π, –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –º–æ–≥—É—Ç –∏–∑–º–µ–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ, –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å–ª–æ–∂–Ω—É—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É, –Ω–æ –Ω–µ –º–æ–≥—É—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è.

## –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–∏–º–æ–π –ø—Ä–æ—Ü–µ–¥—É—Ä—ã

```sql
CREATE OR REPLACE PROCEDURE –∏–º—è_–ø—Ä–æ—Ü–µ–¥—É—Ä—ã(–ø–∞—Ä–∞–º–µ—Ç—Ä1 –¢–ò–ü, –ø–∞—Ä–∞–º–µ—Ç—Ä2 –¢–ò–ü, ...)
LANGUAGE plpgsql
AS $$
BEGIN
-- –ª–æ–≥–∏–∫–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã
END;
$$;
```

LANGUAGE plpgsql ‚Äî —É–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –Ω–∞–ø–∏—Å–∞–Ω–∞ –Ω–∞ —è–∑—ã–∫–µ PL/pgSQL (–ø—Ä–æ—Ü–µ–¥—É—Ä–Ω–æ–º —è–∑—ã–∫–µ PostgreSQL).

AS $$ ... $$ ‚Äî –¥–æ–ª–ª–∞—Ä–æ–≤–æ–µ –∫–≤–æ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –æ–±—Ä–∞–º–ª–µ–Ω–∏—è —Ç–µ–ª–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã. –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏–º–≤–æ–ª–æ–≤ –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã.

## –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä –ø—Ä–æ—Ü–µ–¥—É—Ä—ã
–°–æ–∑–¥–∞–¥–∏–º –ø—Ä–æ—Ü–µ–¥—É—Ä—É –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ç—É–¥–µ–Ω—Ç–µ:

```sql
-- –°–æ–∑–¥–∞—ë–º –ø—Ä–æ—Ü–µ–¥—É—Ä—É
CREATE OR REPLACE PROCEDURE update_student_info(
student_id INT,
new_first_name VARCHAR(50),
new_last_name VARCHAR(50)
)
LANGUAGE plpgsql
AS $$
BEGIN
UPDATE Student
SET first_name = new_first_name,
last_name = new_last_name
WHERE id = student_id;
END;
$$;

-- –í—ã–∑—ã–≤–∞–µ–º –ø—Ä–æ—Ü–µ–¥—É—Ä—É
CALL update_student_info(1, 'Alexander', 'Smirnov');

-- –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
SELECT * FROM Student WHERE id = 1;
```
|id|	first_name|	middle_name|	last_name	|birthday	|address|
|---|----|----|----|---|---|
|1	|Alexander|	Fedorovich	|Smirnov|	2000-10-01T00:00:00.000Z|	ul. Pushkina, d. 36, kv. 5|

–≠—Ç–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç ID —Å—Ç—É–¥–µ–Ω—Ç–∞ –∏ –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ, –∑–∞—Ç–µ–º –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ Student.

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ö—Ä–∞–Ω–∏–º—ã–º–∏ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞–º–∏
### –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä

```sql
SELECT routine_name, routine_type
FROM information_schema.routines
WHERE routine_type = 'PROCEDURE' AND routine_schema = 'public';
```

### –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã

```sql
DROP PROCEDURE IF EXISTS add_student(VARCHAR, VARCHAR, DATE);
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã
–í PostgreSQL –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CREATE OR REPLACE PROCEDURE:

```sql
CREATE OR REPLACE PROCEDURE add_student(
student_first_name VARCHAR(50),
student_last_name VARCHAR(50),
student_birthday DATE
)
-- –Ω–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
```


–•—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–ª–æ–∂–Ω–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –ø—Ä—è–º–æ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –û–Ω–∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—é –ª–æ–≥–∏–∫–∏, –ø–æ–≤—ã—à–∞—é—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö! üöÄ